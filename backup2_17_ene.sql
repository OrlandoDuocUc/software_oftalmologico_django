--
-- PostgreSQL database dump
--

-- Dumped from database version 17.5
-- Dumped by pg_dump version 17.5

-- Started on 2026-01-17 22:30:05

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 275 (class 1255 OID 17213)
-- Name: actualizar_fecha_modificacion_proveedor(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.actualizar_fecha_modificacion_proveedor() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.fecha_actualizacion := CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.actualizar_fecha_modificacion_proveedor() OWNER TO postgres;

--
-- TOC entry 276 (class 1255 OID 17214)
-- Name: generar_codigo_proveedor(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.generar_codigo_proveedor() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF NEW.codigo_proveedor IS NULL OR NEW.codigo_proveedor = '' THEN
        NEW.codigo_proveedor := 'PROV' || LPAD(NEW.proveedor_id::text, 6, '0');
    END IF;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.generar_codigo_proveedor() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 258 (class 1259 OID 17536)
-- Name: auth_group; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group (
    id integer NOT NULL,
    name character varying(150) NOT NULL
);


ALTER TABLE public.auth_group OWNER TO postgres;

--
-- TOC entry 257 (class 1259 OID 17535)
-- Name: auth_group_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 260 (class 1259 OID 17544)
-- Name: auth_group_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group_permissions (
    id bigint NOT NULL,
    group_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.auth_group_permissions OWNER TO postgres;

--
-- TOC entry 259 (class 1259 OID 17543)
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 256 (class 1259 OID 17530)
-- Name: auth_permission; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_permission (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    content_type_id integer NOT NULL,
    codename character varying(100) NOT NULL
);


ALTER TABLE public.auth_permission OWNER TO postgres;

--
-- TOC entry 255 (class 1259 OID 17529)
-- Name: auth_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 262 (class 1259 OID 17550)
-- Name: auth_user; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user (
    id integer NOT NULL,
    password character varying(128) NOT NULL,
    last_login timestamp with time zone,
    is_superuser boolean NOT NULL,
    username character varying(150) NOT NULL,
    first_name character varying(150) NOT NULL,
    last_name character varying(150) NOT NULL,
    email character varying(254) NOT NULL,
    is_staff boolean NOT NULL,
    is_active boolean NOT NULL,
    date_joined timestamp with time zone NOT NULL
);


ALTER TABLE public.auth_user OWNER TO postgres;

--
-- TOC entry 264 (class 1259 OID 17558)
-- Name: auth_user_groups; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user_groups (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    group_id integer NOT NULL
);


ALTER TABLE public.auth_user_groups OWNER TO postgres;

--
-- TOC entry 263 (class 1259 OID 17557)
-- Name: auth_user_groups_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user_groups ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_groups_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 261 (class 1259 OID 17549)
-- Name: auth_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 266 (class 1259 OID 17564)
-- Name: auth_user_user_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_user_user_permissions (
    id bigint NOT NULL,
    user_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.auth_user_user_permissions OWNER TO postgres;

--
-- TOC entry 265 (class 1259 OID 17563)
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_user_user_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_user_user_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 269 (class 1259 OID 17650)
-- Name: authtoken_token; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.authtoken_token (
    key character varying(40) NOT NULL,
    created timestamp with time zone NOT NULL,
    user_id integer NOT NULL
);


ALTER TABLE public.authtoken_token OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 17215)
-- Name: biomicroscopia; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.biomicroscopia (
    biomicroscopia_id integer NOT NULL,
    ficha_id integer,
    parpados_od text,
    conjuntiva_od text,
    cornea_od text,
    camara_anterior_od text,
    iris_od text,
    pupila_od_mm character varying(10),
    pupila_od_reaccion character varying(20),
    cristalino_od text,
    parpados_oi text,
    conjuntiva_oi text,
    cornea_oi text,
    camara_anterior_oi text,
    iris_oi text,
    pupila_oi_mm character varying(10),
    pupila_oi_reaccion character varying(20),
    cristalino_oi text,
    observaciones_generales text,
    fecha_examen timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    pupila_desc_od text,
    pestanas_od text,
    conjuntiva_bulbar_od text,
    conjuntiva_tarsal_od text,
    orbita_od text,
    pliegue_semilunar_od text,
    caruncula_od text,
    conductos_lagrimales_od text,
    parpado_superior_od text,
    parpado_inferior_od text,
    pupila_desc_oi text,
    pestanas_oi text,
    conjuntiva_bulbar_oi text,
    conjuntiva_tarsal_oi text,
    orbita_oi text,
    pliegue_semilunar_oi text,
    caruncula_oi text,
    conductos_lagrimales_oi text,
    parpado_superior_oi text,
    parpado_inferior_oi text,
    otros_detalles text
);


ALTER TABLE public.biomicroscopia OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 17221)
-- Name: biomicroscopia_biomicroscopia_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.biomicroscopia_biomicroscopia_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.biomicroscopia_biomicroscopia_id_seq OWNER TO postgres;

--
-- TOC entry 5229 (class 0 OID 0)
-- Dependencies: 218
-- Name: biomicroscopia_biomicroscopia_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.biomicroscopia_biomicroscopia_id_seq OWNED BY public.biomicroscopia.biomicroscopia_id;


--
-- TOC entry 219 (class 1259 OID 17222)
-- Name: campos_visuales; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.campos_visuales (
    campo_visual_id integer NOT NULL,
    ficha_id integer,
    tipo_campo character varying(50),
    resultado_od text,
    resultado_oi text,
    interpretacion text,
    fecha_examen timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.campos_visuales OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 17228)
-- Name: campos_visuales_campo_visual_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.campos_visuales_campo_visual_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.campos_visuales_campo_visual_id_seq OWNER TO postgres;

--
-- TOC entry 5230 (class 0 OID 0)
-- Dependencies: 220
-- Name: campos_visuales_campo_visual_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.campos_visuales_campo_visual_id_seq OWNED BY public.campos_visuales.campo_visual_id;


--
-- TOC entry 221 (class 1259 OID 17229)
-- Name: clientes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.clientes (
    cliente_id integer NOT NULL,
    nombres character varying(100) NOT NULL,
    ap_pat character varying(100) NOT NULL,
    ap_mat character varying(100),
    rut character varying(20) NOT NULL,
    email character varying(120),
    telefono character varying(20),
    direccion text,
    fecha_nacimiento date,
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    estado boolean DEFAULT true
);


ALTER TABLE public.clientes OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 17236)
-- Name: clientes_cliente_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.clientes_cliente_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.clientes_cliente_id_seq OWNER TO postgres;

--
-- TOC entry 5231 (class 0 OID 0)
-- Dependencies: 222
-- Name: clientes_cliente_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.clientes_cliente_id_seq OWNED BY public.clientes.cliente_id;


--
-- TOC entry 272 (class 1259 OID 17679)
-- Name: compras; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.compras (
    compra_id integer NOT NULL,
    proveedor_id integer NOT NULL,
    numero_factura character varying(50),
    ruc_ci character varying(20),
    fecha_pedido date DEFAULT CURRENT_DATE NOT NULL,
    fecha_pago date,
    forma_pago character varying(50),
    plazo_pago character varying(50),
    notas text,
    subtotal_general numeric(12,2) DEFAULT 0 NOT NULL,
    subtotal_tarifa_15 numeric(12,2) DEFAULT 0 NOT NULL,
    subtotal_tarifa_5 numeric(12,2) DEFAULT 0 NOT NULL,
    subtotal_tarifa_0 numeric(12,2) DEFAULT 0 NOT NULL,
    descuento_total numeric(12,2) DEFAULT 0 NOT NULL,
    iva_15 numeric(12,2) DEFAULT 0 NOT NULL,
    iva_5 numeric(12,2) DEFAULT 0 NOT NULL,
    total_pagar numeric(12,2) DEFAULT 0 NOT NULL,
    abono numeric(12,2) DEFAULT 0 NOT NULL,
    saldo numeric(12,2) DEFAULT 0 NOT NULL,
    elaborado_codigo character varying(50),
    elaborado_nombre character varying(150),
    autorizado_codigo character varying(50),
    autorizado_nombre character varying(150),
    recibido_codigo character varying(50),
    recibido_nombre character varying(150),
    estado character varying(20) DEFAULT 'borrador'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT ck_compras_totales_non_negative CHECK (((subtotal_general >= (0)::numeric) AND (subtotal_tarifa_15 >= (0)::numeric) AND (subtotal_tarifa_5 >= (0)::numeric) AND (subtotal_tarifa_0 >= (0)::numeric) AND (descuento_total >= (0)::numeric) AND (iva_15 >= (0)::numeric) AND (iva_5 >= (0)::numeric) AND (total_pagar >= (0)::numeric) AND (abono >= (0)::numeric) AND (saldo >= (0)::numeric)))
);


ALTER TABLE public.compras OWNER TO postgres;

--
-- TOC entry 271 (class 1259 OID 17678)
-- Name: compras_compra_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.compras_compra_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.compras_compra_id_seq OWNER TO postgres;

--
-- TOC entry 5232 (class 0 OID 0)
-- Dependencies: 271
-- Name: compras_compra_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.compras_compra_id_seq OWNED BY public.compras.compra_id;


--
-- TOC entry 274 (class 1259 OID 17708)
-- Name: compras_detalle; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.compras_detalle (
    detalle_id integer NOT NULL,
    compra_id integer NOT NULL,
    producto_id integer NOT NULL,
    marca character varying(100),
    codigo character varying(100),
    descripcion text,
    cantidad integer DEFAULT 0 NOT NULL,
    precio_unitario numeric(12,2) DEFAULT 0 NOT NULL,
    tarifa_iva numeric(5,4) DEFAULT 0,
    descuento numeric(12,2) DEFAULT 0,
    valor_total numeric(12,2) DEFAULT 0 NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT compras_detalle_cantidad_check CHECK ((cantidad >= 0)),
    CONSTRAINT compras_detalle_descuento_check CHECK ((descuento >= (0)::numeric)),
    CONSTRAINT compras_detalle_precio_unitario_check CHECK ((precio_unitario >= (0)::numeric))
);


ALTER TABLE public.compras_detalle OWNER TO postgres;

--
-- TOC entry 273 (class 1259 OID 17707)
-- Name: compras_detalle_detalle_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.compras_detalle_detalle_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.compras_detalle_detalle_id_seq OWNER TO postgres;

--
-- TOC entry 5233 (class 0 OID 0)
-- Dependencies: 273
-- Name: compras_detalle_detalle_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.compras_detalle_detalle_id_seq OWNED BY public.compras_detalle.detalle_id;


--
-- TOC entry 223 (class 1259 OID 17237)
-- Name: detalle_ventas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.detalle_ventas (
    detalle_id integer NOT NULL,
    venta_id integer,
    producto_id integer,
    cantidad integer NOT NULL,
    precio_unitario numeric(10,2) NOT NULL,
    subtotal numeric(10,2) NOT NULL
);


ALTER TABLE public.detalle_ventas OWNER TO postgres;

--
-- TOC entry 224 (class 1259 OID 17240)
-- Name: detalle_ventas_detalle_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.detalle_ventas_detalle_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.detalle_ventas_detalle_id_seq OWNER TO postgres;

--
-- TOC entry 5234 (class 0 OID 0)
-- Dependencies: 224
-- Name: detalle_ventas_detalle_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.detalle_ventas_detalle_id_seq OWNED BY public.detalle_ventas.detalle_id;


--
-- TOC entry 225 (class 1259 OID 17241)
-- Name: diagnosticos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.diagnosticos (
    diagnostico_id integer NOT NULL,
    ficha_id integer,
    diagnostico_principal text NOT NULL,
    diagnosticos_secundarios text,
    cie_10_principal character varying(10),
    cie_10_secundarios text,
    severidad character varying(20),
    observaciones text,
    fecha_diagnostico timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.diagnosticos OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 17247)
-- Name: diagnosticos_diagnostico_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.diagnosticos_diagnostico_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.diagnosticos_diagnostico_id_seq OWNER TO postgres;

--
-- TOC entry 5235 (class 0 OID 0)
-- Dependencies: 226
-- Name: diagnosticos_diagnostico_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.diagnosticos_diagnostico_id_seq OWNED BY public.diagnosticos.diagnostico_id;


--
-- TOC entry 268 (class 1259 OID 17622)
-- Name: django_admin_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_admin_log (
    id integer NOT NULL,
    action_time timestamp with time zone NOT NULL,
    object_id text,
    object_repr character varying(200) NOT NULL,
    action_flag smallint NOT NULL,
    change_message text NOT NULL,
    content_type_id integer,
    user_id integer NOT NULL,
    CONSTRAINT django_admin_log_action_flag_check CHECK ((action_flag >= 0))
);


ALTER TABLE public.django_admin_log OWNER TO postgres;

--
-- TOC entry 267 (class 1259 OID 17621)
-- Name: django_admin_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_admin_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_admin_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 254 (class 1259 OID 17522)
-- Name: django_content_type; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_content_type (
    id integer NOT NULL,
    app_label character varying(100) NOT NULL,
    model character varying(100) NOT NULL
);


ALTER TABLE public.django_content_type OWNER TO postgres;

--
-- TOC entry 253 (class 1259 OID 17521)
-- Name: django_content_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_content_type ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_content_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 252 (class 1259 OID 17514)
-- Name: django_migrations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_migrations (
    id bigint NOT NULL,
    app character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    applied timestamp with time zone NOT NULL
);


ALTER TABLE public.django_migrations OWNER TO postgres;

--
-- TOC entry 251 (class 1259 OID 17513)
-- Name: django_migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_migrations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_migrations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 270 (class 1259 OID 17663)
-- Name: django_session; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_session (
    session_key character varying(40) NOT NULL,
    session_data text NOT NULL,
    expire_date timestamp with time zone NOT NULL
);


ALTER TABLE public.django_session OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 17248)
-- Name: fichas_clinicas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.fichas_clinicas (
    ficha_id integer NOT NULL,
    paciente_medico_id integer,
    usuario_id integer,
    numero_consulta character varying(20) NOT NULL,
    fecha_consulta timestamp without time zone NOT NULL,
    motivo_consulta text,
    historia_actual text,
    av_od_sc character varying(20),
    av_od_cc character varying(20),
    av_od_ph character varying(20),
    av_od_cerca character varying(20),
    av_oi_sc character varying(20),
    av_oi_cc character varying(20),
    av_oi_ph character varying(20),
    av_oi_cerca character varying(20),
    esfera_od character varying(10),
    cilindro_od character varying(10),
    eje_od character varying(10),
    adicion_od character varying(10),
    esfera_oi character varying(10),
    cilindro_oi character varying(10),
    eje_oi character varying(10),
    adicion_oi character varying(10),
    distancia_pupilar character varying(10),
    tipo_lente character varying(50),
    estado character varying(20) DEFAULT 'en_proceso'::character varying,
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.fichas_clinicas OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 17255)
-- Name: fichas_clinicas_ficha_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.fichas_clinicas_ficha_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.fichas_clinicas_ficha_id_seq OWNER TO postgres;

--
-- TOC entry 5236 (class 0 OID 0)
-- Dependencies: 228
-- Name: fichas_clinicas_ficha_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.fichas_clinicas_ficha_id_seq OWNED BY public.fichas_clinicas.ficha_id;


--
-- TOC entry 229 (class 1259 OID 17256)
-- Name: fondo_ojo; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.fondo_ojo (
    fondo_ojo_id integer NOT NULL,
    ficha_id integer,
    disco_optico_od text,
    macula_od text,
    vasos_od text,
    retina_periferica_od text,
    disco_optico_oi text,
    macula_oi text,
    vasos_oi text,
    retina_periferica_oi text,
    observaciones text,
    fecha_examen timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    av_temp_sup_od text,
    av_temp_inf_od text,
    av_nasal_sup_od text,
    av_nasal_inf_od text,
    retina_od text,
    excavacion_od text,
    papila_detalle_od text,
    fijacion_od text,
    color_od text,
    borde_od text,
    av_temp_sup_oi text,
    av_temp_inf_oi text,
    av_nasal_sup_oi text,
    av_nasal_inf_oi text,
    retina_oi text,
    excavacion_oi text,
    papila_detalle_oi text,
    fijacion_oi text,
    color_oi text,
    borde_oi text,
    otros_detalles text
);


ALTER TABLE public.fondo_ojo OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 17262)
-- Name: fondo_ojo_fondo_ojo_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.fondo_ojo_fondo_ojo_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.fondo_ojo_fondo_ojo_id_seq OWNER TO postgres;

--
-- TOC entry 5237 (class 0 OID 0)
-- Dependencies: 230
-- Name: fondo_ojo_fondo_ojo_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.fondo_ojo_fondo_ojo_id_seq OWNED BY public.fondo_ojo.fondo_ojo_id;


--
-- TOC entry 231 (class 1259 OID 17263)
-- Name: pacientes_medicos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pacientes_medicos (
    paciente_medico_id integer NOT NULL,
    cliente_id integer,
    numero_ficha character varying(20) NOT NULL,
    antecedentes_medicos text,
    antecedentes_oculares text,
    alergias text,
    medicamentos_actuales text,
    contacto_emergencia character varying(100),
    telefono_emergencia character varying(20),
    fecha_registro timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    estado boolean DEFAULT true
);


ALTER TABLE public.pacientes_medicos OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 17270)
-- Name: pacientes_medicos_paciente_medico_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.pacientes_medicos_paciente_medico_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.pacientes_medicos_paciente_medico_id_seq OWNER TO postgres;

--
-- TOC entry 5238 (class 0 OID 0)
-- Dependencies: 232
-- Name: pacientes_medicos_paciente_medico_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.pacientes_medicos_paciente_medico_id_seq OWNED BY public.pacientes_medicos.paciente_medico_id;


--
-- TOC entry 233 (class 1259 OID 17271)
-- Name: parametros_clinicos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.parametros_clinicos (
    parametro_id integer NOT NULL,
    ficha_id integer NOT NULL,
    presion_sistolica character varying(10),
    presion_diastolica character varying(10),
    saturacion_o2 character varying(10),
    glucosa character varying(20),
    trigliceridos character varying(20),
    ttp character varying(20),
    atp character varying(20),
    colesterol character varying(20),
    fecha_registro timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.parametros_clinicos OWNER TO postgres;

--
-- TOC entry 234 (class 1259 OID 17275)
-- Name: parametros_clinicos_parametro_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.parametros_clinicos_parametro_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.parametros_clinicos_parametro_id_seq OWNER TO postgres;

--
-- TOC entry 5239 (class 0 OID 0)
-- Dependencies: 234
-- Name: parametros_clinicos_parametro_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.parametros_clinicos_parametro_id_seq OWNED BY public.parametros_clinicos.parametro_id;


--
-- TOC entry 235 (class 1259 OID 17276)
-- Name: presion_intraocular; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.presion_intraocular (
    pio_id integer NOT NULL,
    ficha_id integer,
    pio_od character varying(10),
    pio_oi character varying(10),
    metodo_medicion character varying(50),
    hora_medicion time without time zone,
    observaciones text,
    fecha_medicion timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.presion_intraocular OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 17282)
-- Name: presion_intraocular_pio_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.presion_intraocular_pio_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.presion_intraocular_pio_id_seq OWNER TO postgres;

--
-- TOC entry 5240 (class 0 OID 0)
-- Dependencies: 236
-- Name: presion_intraocular_pio_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.presion_intraocular_pio_id_seq OWNED BY public.presion_intraocular.pio_id;


--
-- TOC entry 237 (class 1259 OID 17283)
-- Name: productos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.productos (
    producto_id integer NOT NULL,
    nombre character varying(200) NOT NULL,
    descripcion text,
    marca character varying(100),
    estado boolean DEFAULT true,
    fecha timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    distribuidor character varying(200),
    material character varying(100),
    tipo_armazon character varying(100),
    codigo character varying(50),
    diametro_1 character varying(50),
    diametro_2 character varying(50),
    color character varying(100),
    cantidad integer DEFAULT 0,
    costo_unitario numeric(10,2),
    costo_total numeric(10,2),
    costo_venta_1 numeric(10,2),
    costo_venta_2 numeric(10,2),
    CONSTRAINT ck_productos_cantidad_non_negative CHECK ((cantidad >= 0)),
    CONSTRAINT ck_productos_costo_unitario_positive CHECK ((costo_unitario >= (0)::numeric))
);


ALTER TABLE public.productos OWNER TO postgres;

--
-- TOC entry 238 (class 1259 OID 17291)
-- Name: productos_producto_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.productos_producto_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.productos_producto_id_seq OWNER TO postgres;

--
-- TOC entry 5241 (class 0 OID 0)
-- Dependencies: 238
-- Name: productos_producto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.productos_producto_id_seq OWNED BY public.productos.producto_id;


--
-- TOC entry 239 (class 1259 OID 17292)
-- Name: proveedores; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.proveedores (
    proveedor_id integer NOT NULL,
    codigo_proveedor character varying(20) NOT NULL,
    razon_social character varying(255) NOT NULL,
    nombre_comercial character varying(255),
    rut character varying(12) NOT NULL,
    direccion text,
    telefono character varying(20),
    email character varying(100),
    sitio_web character varying(255),
    categoria_productos text,
    condiciones_pago character varying(50) DEFAULT 'Contado'::character varying,
    plazo_pago_dias integer DEFAULT 0,
    descuento_volumen numeric(5,2) DEFAULT 0.00,
    representante_nombre character varying(255),
    representante_telefono character varying(20),
    representante_email character varying(100),
    observaciones text,
    estado boolean DEFAULT true,
    fecha_registro timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    fecha_actualizacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT chk_descuento_volumen CHECK (((descuento_volumen >= (0)::numeric) AND (descuento_volumen <= (100)::numeric))),
    CONSTRAINT chk_email_formato CHECK (((email IS NULL) OR ((email)::text ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'::text))),
    CONSTRAINT chk_plazo_pago CHECK ((plazo_pago_dias >= 0)),
    CONSTRAINT chk_representante_email_formato CHECK (((representante_email IS NULL) OR ((representante_email)::text ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$'::text)))
);


ALTER TABLE public.proveedores OWNER TO postgres;

--
-- TOC entry 240 (class 1259 OID 17307)
-- Name: proveedores_proveedor_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.proveedores_proveedor_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.proveedores_proveedor_id_seq OWNER TO postgres;

--
-- TOC entry 5242 (class 0 OID 0)
-- Dependencies: 240
-- Name: proveedores_proveedor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.proveedores_proveedor_id_seq OWNED BY public.proveedores.proveedor_id;


--
-- TOC entry 241 (class 1259 OID 17308)
-- Name: reflejos_pupilares; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reflejos_pupilares (
    reflejo_id integer NOT NULL,
    ficha_id integer NOT NULL,
    acomodativo_uno text,
    fotomotor_uno text,
    consensual_uno text,
    acomodativo_dos text,
    fotomotor_dos text,
    consensual_dos text,
    observaciones text,
    fecha_registro timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.reflejos_pupilares OWNER TO postgres;

--
-- TOC entry 242 (class 1259 OID 17314)
-- Name: reflejos_pupilares_reflejo_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.reflejos_pupilares_reflejo_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.reflejos_pupilares_reflejo_id_seq OWNER TO postgres;

--
-- TOC entry 5243 (class 0 OID 0)
-- Dependencies: 242
-- Name: reflejos_pupilares_reflejo_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.reflejos_pupilares_reflejo_id_seq OWNED BY public.reflejos_pupilares.reflejo_id;


--
-- TOC entry 243 (class 1259 OID 17315)
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    rol_id integer NOT NULL,
    nombre character varying(50) NOT NULL,
    descripcion text,
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    estado boolean DEFAULT true
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- TOC entry 244 (class 1259 OID 17322)
-- Name: roles_rol_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.roles_rol_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.roles_rol_id_seq OWNER TO postgres;

--
-- TOC entry 5244 (class 0 OID 0)
-- Dependencies: 244
-- Name: roles_rol_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.roles_rol_id_seq OWNED BY public.roles.rol_id;


--
-- TOC entry 245 (class 1259 OID 17323)
-- Name: tratamientos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tratamientos (
    tratamiento_id integer NOT NULL,
    ficha_id integer,
    medicamentos text,
    tratamiento_no_farmacologico text,
    recomendaciones text,
    plan_seguimiento text,
    proxima_cita date,
    urgencia_seguimiento character varying(20),
    fecha_tratamiento timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.tratamientos OWNER TO postgres;

--
-- TOC entry 246 (class 1259 OID 17329)
-- Name: tratamientos_tratamiento_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tratamientos_tratamiento_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tratamientos_tratamiento_id_seq OWNER TO postgres;

--
-- TOC entry 5245 (class 0 OID 0)
-- Dependencies: 246
-- Name: tratamientos_tratamiento_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tratamientos_tratamiento_id_seq OWNED BY public.tratamientos.tratamiento_id;


--
-- TOC entry 247 (class 1259 OID 17330)
-- Name: usuarios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usuarios (
    usuario_id integer NOT NULL,
    rol_id integer,
    username character varying(80) NOT NULL,
    password character varying(255) NOT NULL,
    nombre character varying(100) NOT NULL,
    ap_pat character varying(100) NOT NULL,
    ap_mat character varying(100),
    email character varying(120) NOT NULL,
    fecha_creacion timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    estado boolean DEFAULT true
);


ALTER TABLE public.usuarios OWNER TO postgres;

--
-- TOC entry 248 (class 1259 OID 17337)
-- Name: usuarios_usuario_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.usuarios_usuario_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.usuarios_usuario_id_seq OWNER TO postgres;

--
-- TOC entry 5246 (class 0 OID 0)
-- Dependencies: 248
-- Name: usuarios_usuario_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.usuarios_usuario_id_seq OWNED BY public.usuarios.usuario_id;


--
-- TOC entry 249 (class 1259 OID 17338)
-- Name: ventas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ventas (
    venta_id integer NOT NULL,
    cliente_id integer,
    usuario_id integer,
    fecha_venta timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    total numeric(10,2) NOT NULL,
    descuento numeric(5,2) DEFAULT 0,
    metodo_pago character varying(50),
    observaciones text,
    estado character varying(20) DEFAULT 'completada'::character varying
);


ALTER TABLE public.ventas OWNER TO postgres;

--
-- TOC entry 250 (class 1259 OID 17346)
-- Name: ventas_venta_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ventas_venta_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ventas_venta_id_seq OWNER TO postgres;

--
-- TOC entry 5247 (class 0 OID 0)
-- Dependencies: 250
-- Name: ventas_venta_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ventas_venta_id_seq OWNED BY public.ventas.venta_id;


--
-- TOC entry 4786 (class 2604 OID 17347)
-- Name: biomicroscopia biomicroscopia_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biomicroscopia ALTER COLUMN biomicroscopia_id SET DEFAULT nextval('public.biomicroscopia_biomicroscopia_id_seq'::regclass);


--
-- TOC entry 4788 (class 2604 OID 17348)
-- Name: campos_visuales campo_visual_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.campos_visuales ALTER COLUMN campo_visual_id SET DEFAULT nextval('public.campos_visuales_campo_visual_id_seq'::regclass);


--
-- TOC entry 4790 (class 2604 OID 17349)
-- Name: clientes cliente_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.clientes ALTER COLUMN cliente_id SET DEFAULT nextval('public.clientes_cliente_id_seq'::regclass);


--
-- TOC entry 4833 (class 2604 OID 17682)
-- Name: compras compra_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras ALTER COLUMN compra_id SET DEFAULT nextval('public.compras_compra_id_seq'::regclass);


--
-- TOC entry 4848 (class 2604 OID 17711)
-- Name: compras_detalle detalle_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras_detalle ALTER COLUMN detalle_id SET DEFAULT nextval('public.compras_detalle_detalle_id_seq'::regclass);


--
-- TOC entry 4793 (class 2604 OID 17350)
-- Name: detalle_ventas detalle_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.detalle_ventas ALTER COLUMN detalle_id SET DEFAULT nextval('public.detalle_ventas_detalle_id_seq'::regclass);


--
-- TOC entry 4794 (class 2604 OID 17351)
-- Name: diagnosticos diagnostico_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.diagnosticos ALTER COLUMN diagnostico_id SET DEFAULT nextval('public.diagnosticos_diagnostico_id_seq'::regclass);


--
-- TOC entry 4796 (class 2604 OID 17352)
-- Name: fichas_clinicas ficha_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fichas_clinicas ALTER COLUMN ficha_id SET DEFAULT nextval('public.fichas_clinicas_ficha_id_seq'::regclass);


--
-- TOC entry 4799 (class 2604 OID 17353)
-- Name: fondo_ojo fondo_ojo_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fondo_ojo ALTER COLUMN fondo_ojo_id SET DEFAULT nextval('public.fondo_ojo_fondo_ojo_id_seq'::regclass);


--
-- TOC entry 4801 (class 2604 OID 17354)
-- Name: pacientes_medicos paciente_medico_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes_medicos ALTER COLUMN paciente_medico_id SET DEFAULT nextval('public.pacientes_medicos_paciente_medico_id_seq'::regclass);


--
-- TOC entry 4804 (class 2604 OID 17355)
-- Name: parametros_clinicos parametro_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametros_clinicos ALTER COLUMN parametro_id SET DEFAULT nextval('public.parametros_clinicos_parametro_id_seq'::regclass);


--
-- TOC entry 4806 (class 2604 OID 17356)
-- Name: presion_intraocular pio_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.presion_intraocular ALTER COLUMN pio_id SET DEFAULT nextval('public.presion_intraocular_pio_id_seq'::regclass);


--
-- TOC entry 4808 (class 2604 OID 17357)
-- Name: productos producto_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.productos ALTER COLUMN producto_id SET DEFAULT nextval('public.productos_producto_id_seq'::regclass);


--
-- TOC entry 4812 (class 2604 OID 17358)
-- Name: proveedores proveedor_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.proveedores ALTER COLUMN proveedor_id SET DEFAULT nextval('public.proveedores_proveedor_id_seq'::regclass);


--
-- TOC entry 4819 (class 2604 OID 17359)
-- Name: reflejos_pupilares reflejo_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reflejos_pupilares ALTER COLUMN reflejo_id SET DEFAULT nextval('public.reflejos_pupilares_reflejo_id_seq'::regclass);


--
-- TOC entry 4821 (class 2604 OID 17360)
-- Name: roles rol_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles ALTER COLUMN rol_id SET DEFAULT nextval('public.roles_rol_id_seq'::regclass);


--
-- TOC entry 4824 (class 2604 OID 17361)
-- Name: tratamientos tratamiento_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tratamientos ALTER COLUMN tratamiento_id SET DEFAULT nextval('public.tratamientos_tratamiento_id_seq'::regclass);


--
-- TOC entry 4826 (class 2604 OID 17362)
-- Name: usuarios usuario_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios ALTER COLUMN usuario_id SET DEFAULT nextval('public.usuarios_usuario_id_seq'::regclass);


--
-- TOC entry 4829 (class 2604 OID 17363)
-- Name: ventas venta_id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ventas ALTER COLUMN venta_id SET DEFAULT nextval('public.ventas_venta_id_seq'::regclass);


--
-- TOC entry 5207 (class 0 OID 17536)
-- Dependencies: 258
-- Data for Name: auth_group; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_group (id, name) FROM stdin;
\.


--
-- TOC entry 5209 (class 0 OID 17544)
-- Dependencies: 260
-- Data for Name: auth_group_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_group_permissions (id, group_id, permission_id) FROM stdin;
\.


--
-- TOC entry 5205 (class 0 OID 17530)
-- Dependencies: 256
-- Data for Name: auth_permission; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_permission (id, name, content_type_id, codename) FROM stdin;
1	Can add log entry	1	add_logentry
2	Can change log entry	1	change_logentry
3	Can delete log entry	1	delete_logentry
4	Can view log entry	1	view_logentry
5	Can add permission	2	add_permission
6	Can change permission	2	change_permission
7	Can delete permission	2	delete_permission
8	Can view permission	2	view_permission
9	Can add group	3	add_group
10	Can change group	3	change_group
11	Can delete group	3	delete_group
12	Can view group	3	view_group
13	Can add user	4	add_user
14	Can change user	4	change_user
15	Can delete user	4	delete_user
16	Can view user	4	view_user
17	Can add content type	5	add_contenttype
18	Can change content type	5	change_contenttype
19	Can delete content type	5	delete_contenttype
20	Can view content type	5	view_contenttype
21	Can add session	6	add_session
22	Can change session	6	change_session
23	Can delete session	6	delete_session
24	Can view session	6	view_session
25	Can add Token	7	add_token
26	Can change Token	7	change_token
27	Can delete Token	7	delete_token
28	Can view Token	7	view_token
29	Can add Token	8	add_tokenproxy
30	Can change Token	8	change_tokenproxy
31	Can delete Token	8	delete_tokenproxy
32	Can view Token	8	view_tokenproxy
33	Can add Producto	9	add_product
34	Can change Producto	9	change_product
35	Can delete Producto	9	delete_product
36	Can view Producto	9	view_product
37	Can add Proveedor	10	add_proveedor
38	Can change Proveedor	10	change_proveedor
39	Can delete Proveedor	10	delete_proveedor
40	Can view Proveedor	10	view_proveedor
41	Can add Cliente	11	add_cliente
42	Can change Cliente	11	change_cliente
43	Can delete Cliente	11	delete_cliente
44	Can view Cliente	11	view_cliente
45	Can add Paciente medico	12	add_pacientemedico
46	Can change Paciente medico	12	change_pacientemedico
47	Can delete Paciente medico	12	delete_pacientemedico
48	Can view Paciente medico	12	view_pacientemedico
49	Can add Venta	13	add_sale
50	Can change Venta	13	change_sale
51	Can delete Venta	13	delete_sale
52	Can view Venta	13	view_sale
53	Can add Detalle de venta	14	add_saledetail
54	Can change Detalle de venta	14	change_saledetail
55	Can delete Detalle de venta	14	delete_saledetail
56	Can view Detalle de venta	14	view_saledetail
57	Can add Ficha clinica	15	add_fichaclinica
58	Can change Ficha clinica	15	change_fichaclinica
59	Can delete Ficha clinica	15	delete_fichaclinica
60	Can view Ficha clinica	15	view_fichaclinica
61	Can add Biomicroscopia	16	add_biomicroscopia
62	Can change Biomicroscopia	16	change_biomicroscopia
63	Can delete Biomicroscopia	16	delete_biomicroscopia
64	Can view Biomicroscopia	16	view_biomicroscopia
65	Can add Fondo de ojo	17	add_fondoojo
66	Can change Fondo de ojo	17	change_fondoojo
67	Can delete Fondo de ojo	17	delete_fondoojo
68	Can view Fondo de ojo	17	view_fondoojo
69	Can add Presion intraocular	18	add_presionintraocular
70	Can change Presion intraocular	18	change_presionintraocular
71	Can delete Presion intraocular	18	delete_presionintraocular
72	Can view Presion intraocular	18	view_presionintraocular
73	Can add Campo visual	19	add_campovisual
74	Can change Campo visual	19	change_campovisual
75	Can delete Campo visual	19	delete_campovisual
76	Can view Campo visual	19	view_campovisual
77	Can add Diagnostico medico	20	add_diagnosticomedico
78	Can change Diagnostico medico	20	change_diagnosticomedico
79	Can delete Diagnostico medico	20	delete_diagnosticomedico
80	Can view Diagnostico medico	20	view_diagnosticomedico
81	Can add Tratamiento	21	add_tratamiento
82	Can change Tratamiento	21	change_tratamiento
83	Can delete Tratamiento	21	delete_tratamiento
84	Can view Tratamiento	21	view_tratamiento
85	Can add Reflejos pupilares	22	add_reflejospupilares
86	Can change Reflejos pupilares	22	change_reflejospupilares
87	Can delete Reflejos pupilares	22	delete_reflejospupilares
88	Can view Reflejos pupilares	22	view_reflejospupilares
89	Can add Parametro clinico	23	add_parametrosclinicos
90	Can change Parametro clinico	23	change_parametrosclinicos
91	Can delete Parametro clinico	23	delete_parametrosclinicos
92	Can view Parametro clinico	23	view_parametrosclinicos
\.


--
-- TOC entry 5211 (class 0 OID 17550)
-- Dependencies: 262
-- Data for Name: auth_user; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user (id, password, last_login, is_superuser, username, first_name, last_name, email, is_staff, is_active, date_joined) FROM stdin;
1		2026-01-08 19:29:59.522701-03	t	admin	Administrador	Sistema	admin@gmail.com	t	t	2025-11-19 19:29:42.989052-03
\.


--
-- TOC entry 5213 (class 0 OID 17558)
-- Dependencies: 264
-- Data for Name: auth_user_groups; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user_groups (id, user_id, group_id) FROM stdin;
\.


--
-- TOC entry 5215 (class 0 OID 17564)
-- Dependencies: 266
-- Data for Name: auth_user_user_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.auth_user_user_permissions (id, user_id, permission_id) FROM stdin;
\.


--
-- TOC entry 5218 (class 0 OID 17650)
-- Dependencies: 269
-- Data for Name: authtoken_token; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.authtoken_token (key, created, user_id) FROM stdin;
\.


--
-- TOC entry 5166 (class 0 OID 17215)
-- Dependencies: 217
-- Data for Name: biomicroscopia; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.biomicroscopia (biomicroscopia_id, ficha_id, parpados_od, conjuntiva_od, cornea_od, camara_anterior_od, iris_od, pupila_od_mm, pupila_od_reaccion, cristalino_od, parpados_oi, conjuntiva_oi, cornea_oi, camara_anterior_oi, iris_oi, pupila_oi_mm, pupila_oi_reaccion, cristalino_oi, observaciones_generales, fecha_examen, pupila_desc_od, pestanas_od, conjuntiva_bulbar_od, conjuntiva_tarsal_od, orbita_od, pliegue_semilunar_od, caruncula_od, conductos_lagrimales_od, parpado_superior_od, parpado_inferior_od, pupila_desc_oi, pestanas_oi, conjuntiva_bulbar_oi, conjuntiva_tarsal_oi, orbita_oi, pliegue_semilunar_oi, caruncula_oi, conductos_lagrimales_oi, parpado_superior_oi, parpado_inferior_oi, otros_detalles) FROM stdin;
\.


--
-- TOC entry 5168 (class 0 OID 17222)
-- Dependencies: 219
-- Data for Name: campos_visuales; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.campos_visuales (campo_visual_id, ficha_id, tipo_campo, resultado_od, resultado_oi, interpretacion, fecha_examen) FROM stdin;
\.


--
-- TOC entry 5170 (class 0 OID 17229)
-- Dependencies: 221
-- Data for Name: clientes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.clientes (cliente_id, nombres, ap_pat, ap_mat, rut, email, telefono, direccion, fecha_nacimiento, fecha_creacion, estado) FROM stdin;
1	Juan	Pérez	González	12.345.678-9	juan@test.com	+56912345678	\N	\N	2025-10-05 00:20:40.071838	t
2	jacinto	Gutierrez	Ramirez	18.222.933-3	jc@gmail.com	987689898	guayaquil 2025	1991-03-04	2025-10-05 00:36:15.318328	t
5	clorofilo	milano	cepeda	11.414.112-3	clorofilo@gmail.com	931891202	las nieves 3131	1987-06-09	2025-10-09 20:12:35.700403	t
6	ignacio	gutierrez	ramirez	12.341.234-1	ig@gmail.com	213152451	san mateo 1255	1977-11-10	2025-10-11 01:28:21.104831	t
7	orlando	rodriguez	modler	0321323313001	ro@gmail.com	+59345454545	\N	1979-08-13	2025-10-13 22:25:46.130442	t
11	primario	primer	prime	9999999-1	primer@gmail.com	213021412	primero 5656	\N	2025-10-14 05:11:37.083973	t
12	raul	rojas	moreno	21324654-8	raul@gmail.com	9899812392	santiago 4545	\N	2025-10-14 05:21:55.278177	t
13	paco	paco	paco	11123123-5	paco@gmail.com	9898983498	villa almena 2332	\N	2025-10-14 05:30:07.014127	t
14	adriana	perez	locoma	0100000009	adriana@gmail.com	0989878987	las rosas 356	\N	2025-10-14 08:26:43.293261	t
\.


--
-- TOC entry 5221 (class 0 OID 17679)
-- Dependencies: 272
-- Data for Name: compras; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.compras (compra_id, proveedor_id, numero_factura, ruc_ci, fecha_pedido, fecha_pago, forma_pago, plazo_pago, notas, subtotal_general, subtotal_tarifa_15, subtotal_tarifa_5, subtotal_tarifa_0, descuento_total, iva_15, iva_5, total_pagar, abono, saldo, elaborado_codigo, elaborado_nombre, autorizado_codigo, autorizado_nombre, recibido_codigo, recibido_nombre, estado, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 5223 (class 0 OID 17708)
-- Dependencies: 274
-- Data for Name: compras_detalle; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.compras_detalle (detalle_id, compra_id, producto_id, marca, codigo, descripcion, cantidad, precio_unitario, tarifa_iva, descuento, valor_total, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 5172 (class 0 OID 17237)
-- Dependencies: 223
-- Data for Name: detalle_ventas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.detalle_ventas (detalle_id, venta_id, producto_id, cantidad, precio_unitario, subtotal) FROM stdin;
1	1	4	1	8500.00	8500.00
2	2	6	1	70.00	70.00
3	3	5	1	3500.00	3500.00
4	4	1	1	25000.00	25000.00
5	5	2	1	45000.00	45000.00
6	6	2	1	45000.00	45000.00
7	7	7	1	89.00	89.00
8	10	8	1	90.00	90.00
\.


--
-- TOC entry 5174 (class 0 OID 17241)
-- Dependencies: 225
-- Data for Name: diagnosticos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.diagnosticos (diagnostico_id, ficha_id, diagnostico_principal, diagnosticos_secundarios, cie_10_principal, cie_10_secundarios, severidad, observaciones, fecha_diagnostico) FROM stdin;
\.


--
-- TOC entry 5217 (class 0 OID 17622)
-- Dependencies: 268
-- Data for Name: django_admin_log; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_admin_log (id, action_time, object_id, object_repr, action_flag, change_message, content_type_id, user_id) FROM stdin;
\.


--
-- TOC entry 5203 (class 0 OID 17522)
-- Dependencies: 254
-- Data for Name: django_content_type; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_content_type (id, app_label, model) FROM stdin;
1	admin	logentry
2	auth	permission
3	auth	group
4	auth	user
5	contenttypes	contenttype
6	sessions	session
7	authtoken	token
8	authtoken	tokenproxy
9	inventory	product
10	inventory	proveedor
11	clients	cliente
12	clients	pacientemedico
13	sales	sale
14	sales	saledetail
15	medical	fichaclinica
16	medical	biomicroscopia
17	medical	fondoojo
18	medical	presionintraocular
19	medical	campovisual
20	medical	diagnosticomedico
21	medical	tratamiento
22	medical	reflejospupilares
23	medical	parametrosclinicos
\.


--
-- TOC entry 5201 (class 0 OID 17514)
-- Dependencies: 252
-- Data for Name: django_migrations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_migrations (id, app, name, applied) FROM stdin;
1	contenttypes	0001_initial	2025-11-19 19:29:13.944049-03
2	auth	0001_initial	2025-11-19 19:29:14.084045-03
3	admin	0001_initial	2025-11-19 19:29:14.129047-03
4	admin	0002_logentry_remove_auto_add	2025-11-19 19:29:14.143046-03
5	admin	0003_logentry_add_action_flag_choices	2025-11-19 19:29:14.163047-03
6	contenttypes	0002_remove_content_type_name	2025-11-19 19:29:14.251055-03
7	auth	0002_alter_permission_name_max_length	2025-11-19 19:29:14.269049-03
8	auth	0003_alter_user_email_max_length	2025-11-19 19:29:14.289051-03
9	auth	0004_alter_user_username_opts	2025-11-19 19:29:14.304048-03
10	auth	0005_alter_user_last_login_null	2025-11-19 19:29:14.322047-03
11	auth	0006_require_contenttypes_0002	2025-11-19 19:29:14.329045-03
12	auth	0007_alter_validators_add_error_messages	2025-11-19 19:29:14.35005-03
13	auth	0008_alter_user_username_max_length	2025-11-19 19:29:14.378046-03
14	auth	0009_alter_user_last_name_max_length	2025-11-19 19:29:14.395051-03
15	auth	0010_alter_group_name_max_length	2025-11-19 19:29:14.419047-03
16	auth	0011_update_proxy_permissions	2025-11-19 19:29:14.459052-03
17	auth	0012_alter_user_first_name_max_length	2025-11-19 19:29:14.476047-03
18	authtoken	0001_initial	2025-11-19 19:29:14.515048-03
19	authtoken	0002_auto_20160226_1747	2025-11-19 19:29:14.560047-03
20	authtoken	0003_tokenproxy	2025-11-19 19:29:14.568049-03
21	authtoken	0004_alter_tokenproxy_options	2025-11-19 19:29:14.579047-03
22	sessions	0001_initial	2025-11-19 19:29:14.609049-03
\.


--
-- TOC entry 5219 (class 0 OID 17663)
-- Dependencies: 270
-- Data for Name: django_session; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.django_session (session_key, session_data, expire_date) FROM stdin;
27kbxqynkgvgl355gjyyaow36lxz4xmn	.eJxVjT0Lg0AQRP_L1iL3had2SZ02teztrlFiVO60CCH_PSYIwW5484Z5wSA3pGezJolNz1DrDOI0QA0nfvRjn5aIPEXIoMF16f4e6CMLSHcZvwXOc8qRaFrHJeU7T_nld3Td3POuHvYdpm4bS1VaRZV2uhVjiT1bUxjnlQ9eKtZeMQbjTIsaxRN6DAVRq3iLqrQO3h9NbkZH:1vLqgJ:b7GGT36xlxPu-CY8G9Xa9iSXo6lL_5l83g01BVRUpxw	2025-12-03 19:29:43.015052-03
vna25sxlkugy6u26qpkn6vskfyjxahs1	.eJxVjT0Lg0AQRP_L1iL3had2SZ02teztrlFiVO60CCH_PSYIwW5484Z5wSA3pGezJolNz1DrDOI0QA0nfvRjn5aIPEXIoMF16f4e6CMLSHcZvwXOc8qRaFrHJeU7T_nld3Td3POuHvYdpm4bS1VaRZV2uhVjiT1bUxjnlQ9eKtZeMQbjTIsaxRN6DAVRq3iLqrQO3h9NbkZH:1vLy7b:LXbZHYlt5KgZP8gY4zsYQIN4RnqCvEePmH_qfljzihM	2025-12-04 03:26:23.717749-03
ccqtc3k07tqbbkj59awd94wtpha8hoy6	.eJxVjT0Lg0AQRP_L1iL3had2SZ02teztrlFiVO60CCH_PSYIwW5484Z5wSA3pGezJolNz1DrDOI0QA0nfvRjn5aIPEXIoMF16f4e6CMLSHcZvwXOc8qRaFrHJeU7T_nld3Td3POuHvYdpm4bS1VaRZV2uhVjiT1bUxjnlQ9eKtZeMQbjTIsaxRN6DAVRq3iLqrQO3h9NbkZH:1vPTsx:a5fhzTAM6uI6rvvR0s5tWJEGiF4OoIkTMXe93OrDSB0	2025-12-13 19:57:47.59901-03
wnveto7wem1kyuut257a7zhtuy2q3usg	.eJxVkM1qwzAQhF-l7NkYyRZR7Ft76SXXnkoxq9W6Fo0lo59CCXn3KmlCyW2ZnW9nmRMc-RPpZyqJ4-QsjLKBGI4wwrNdnXcpR7QhQgMTlrz8-0A-agbpi_1lgduWWiQKxefU3vTUHq5Bb9X7crM-8AumpcI87HtBg1Ry5q4nq23f7TqlhTaaByu1sGg61c0okTWhRrMjmoWto9j3qh79Zp9xcpnXBOP7CbYYbKEcrm-rBnxYTeSa9RoypqdDMdER-sypwpfBWfwrYotMLkzFu4zRBRhFA6mYXLnakDh_3MPuSivOvytFcfM:1vXvcK:B7k8TOT6ECOXq32GMcqhm_5OgvjGmfNVGH98kviPqwk	2026-01-06 03:11:32.885683-03
udzup35drp763770yvso9dmkgqi1mtlt	.eJyFUE1PwzAM_SuTz1WVpNXS9gZc4cgJUOUkLotokyofSDDtv5ONoTEu3Ozn5_eevYeZXlF_jDlSGK2BgVcQ_AwD3JjFOhtTQOMDVDBiTrsLD_g1plC_kTsOcF1jjVr77FKsz3is709Gj4V7e6Ze7e8w7soy9V3DdM9bPpFotJGmEVvRSiaVpN5wyQwq0YoJOZLUKFFttZ6YKSXrmraIvpNLONpES4ThaQ9r8Cbr5E-xuwqcX1Sg4rWGTAqPd2h0yRosc1EVmLT1Y3Y2YbAehp5VELNKPmF5DO_YofqjKn6p3oQFP58zY1PjNg-UjiXx2Wq_uZu_m1iaf12vTNnh5eewS4yaHb4Ahh-Vpw:1ve0du:NQzoQYRmaYKJYCRq578CPJbs5gq-G6fes3tArZIIOA8	2026-01-22 21:46:18.37494-03
\.


--
-- TOC entry 5176 (class 0 OID 17248)
-- Dependencies: 227
-- Data for Name: fichas_clinicas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.fichas_clinicas (ficha_id, paciente_medico_id, usuario_id, numero_consulta, fecha_consulta, motivo_consulta, historia_actual, av_od_sc, av_od_cc, av_od_ph, av_od_cerca, av_oi_sc, av_oi_cc, av_oi_ph, av_oi_cerca, esfera_od, cilindro_od, eje_od, adicion_od, esfera_oi, cilindro_oi, eje_oi, adicion_oi, distancia_pupilar, tipo_lente, estado, fecha_creacion) FROM stdin;
1	2	1	CONS-1759624884327	2025-10-04 21:41:00	dolor de ojo 	dolor en el ojo izquierdo con irritacion 																			en_proceso	2025-10-04 21:42:39.226874
2	3	1	CONS-1760045042816	2025-10-09 23:24:00	dolor de ojo DERECHO	paciente refiere dolor de ojo																			en_proceso	2025-10-09 18:26:09.36954
3	4	1	CONS-1760305930889	2025-10-12 18:52:00	ARDOR DE OJOS	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	en_proceso	2025-10-12 19:08:25.854684
4	1	1	CONS-1760381614740	2025-10-13 15:53:00	MIOPIA Y FATIGA VISUAL	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	en_proceso	2025-10-13 15:54:40.875561
6	6	1	CONS-251014-3859	2025-10-14 06:16:00	dolor ojo izquierdo	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	en_proceso	2025-10-14 06:17:18.073253
7	6	1	CONS-251020-2515	2025-10-20 00:53:00	DOLOR PUPILA IZQUIERDA E INCHAZON		20	20	20	j1	20	20	15	j1	2.00								50 mm	Bifocal	Completada	2025-10-20 00:54:21.434985
5	4	1	CONS-1760393600845	2025-10-13 19:13:00	CEGUERA TEMPORAL																				Pendiente	2025-10-13 19:13:48.54877
8	4	1	CONS-251026-6403	2025-10-26 04:20:00	DOLOR EN LAS PUPILAS	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	\N	completada	2025-10-26 04:22:10.502629
\.


--
-- TOC entry 5178 (class 0 OID 17256)
-- Dependencies: 229
-- Data for Name: fondo_ojo; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.fondo_ojo (fondo_ojo_id, ficha_id, disco_optico_od, macula_od, vasos_od, retina_periferica_od, disco_optico_oi, macula_oi, vasos_oi, retina_periferica_oi, observaciones, fecha_examen, av_temp_sup_od, av_temp_inf_od, av_nasal_sup_od, av_nasal_inf_od, retina_od, excavacion_od, papila_detalle_od, fijacion_od, color_od, borde_od, av_temp_sup_oi, av_temp_inf_oi, av_nasal_sup_oi, av_nasal_inf_oi, retina_oi, excavacion_oi, papila_detalle_oi, fijacion_oi, color_oi, borde_oi, otros_detalles) FROM stdin;
\.


--
-- TOC entry 5180 (class 0 OID 17263)
-- Dependencies: 231
-- Data for Name: pacientes_medicos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.pacientes_medicos (paciente_medico_id, cliente_id, numero_ficha, antecedentes_medicos, antecedentes_oculares, alergias, medicamentos_actuales, contacto_emergencia, telefono_emergencia, fecha_registro, estado) FROM stdin;
1	1	FM-TEST-001	Test	\N	\N	\N	\N	\N	2025-10-04 21:20:40.075605	t
2	2	FM-20251004213615	diabetes	cataratas	polvo	amoxicilina	marcela	+56 2 131 23435	2025-10-04 21:36:15.321102	t
3	5	FM-20251009171235	paciente con ceguera parcial 	cirugias oculares	cafeina	aspirina	raul 	+56 2 131 23435	2025-10-09 17:12:35.716368	t
4	6	FM-20251010222821	diabetes	cirugia ocular	alergico a las pastas	amoxicilina	elias gutierrez	3941379123	2025-10-10 22:28:21.122091	t
5	7	FM-20251013192546	hipertenso	cataratas	al polen 	paracetamol	joaquin jr	+593 78787878	2025-10-13 19:25:46.133362	t
6	14	FM-202510-577211	diabetes	glaucoma 	al sol	amoxicilina	jesus	593766786785	2025-10-14 05:54:06.022494	t
\.


--
-- TOC entry 5182 (class 0 OID 17271)
-- Dependencies: 233
-- Data for Name: parametros_clinicos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.parametros_clinicos (parametro_id, ficha_id, presion_sistolica, presion_diastolica, saturacion_o2, glucosa, trigliceridos, ttp, atp, colesterol, fecha_registro) FROM stdin;
\.


--
-- TOC entry 5184 (class 0 OID 17276)
-- Dependencies: 235
-- Data for Name: presion_intraocular; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.presion_intraocular (pio_id, ficha_id, pio_od, pio_oi, metodo_medicion, hora_medicion, observaciones, fecha_medicion) FROM stdin;
\.


--
-- TOC entry 5186 (class 0 OID 17283)
-- Dependencies: 237
-- Data for Name: productos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.productos (producto_id, nombre, descripcion, marca, estado, fecha, distribuidor, material, tipo_armazon, codigo, diametro_1, diametro_2, color, cantidad, costo_unitario, costo_total, costo_venta_1, costo_venta_2) FROM stdin;
4	Gotas Lubricantes	Lágrimas artificiales para ojo seco	Refresh	t	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
6	Lentes de sol Oackley	Lentes de sol azules	\N	t	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
5	Limpiador de Lentes	Solución limpiadora para lentes	OptiClean	t	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
1	Lentes de Contacto Diarios	Lentes de contacto desechables diarios	Acuvue	f	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
2	Armazón Metálico Clásico	Armazón metálico para lentes ópticos	Ray-Ban	t	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
7	Lentes de sol	Lentes de sol oackley azul marco de platino y espejados	OACKLEY	t	2025-12-23 03:05:48.466394	\N	\N	\N	\N	\N	\N	\N	0	\N	\N	\N	\N
8	prueba1	lentes prueba	ray ban	t	2026-01-08 03:00:00	optica chile	acero	plastico	rb3030	34mm	38mm	negro	99	30.00	3000.00	90.00	60.00
9	probando orlando	este producto es la sensacion del verano.	OACKLEY	t	2026-01-13 03:00:00	optica chile	acero	plastico	rb3032	34mm	38mm	negro	10	250.00	2500.00	750.00	500.00
10	probando 2 con el 15 por ciento	tiene el 15	ray ban	t	2026-01-13 03:00:00	optica chile	acero	plastico	rb3033	34mm	38mm	negro	6	400.00	460.00	1380.00	920.00
\.


--
-- TOC entry 5188 (class 0 OID 17292)
-- Dependencies: 239
-- Data for Name: proveedores; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.proveedores (proveedor_id, codigo_proveedor, razon_social, nombre_comercial, rut, direccion, telefono, email, sitio_web, categoria_productos, condiciones_pago, plazo_pago_dias, descuento_volumen, representante_nombre, representante_telefono, representante_email, observaciones, estado, fecha_registro, fecha_actualizacion) FROM stdin;
2	PROV000002	Cristales y Accesorios S.A.	CristalAcc	96.789.123-4	Calle Comercial 567, Providencia, Santiago	+56 2 2345 6789	contacto@cristalacc.cl	\N	Cristales oftálmicos, Tratamientos antirreflex, Accesorios	Contado	0	3.50	Juan Carlos Pérez	+56 9 7654 3210	juan.perez@cristalacc.cl	Especialistas en cristales progresivos y tratamientos de alta gama.	t	2025-10-05 03:50:43.879202	2025-10-05 03:50:43.879202
3	PROV000003	Monturas Premium Chile Ltda.	MonturasPremium	77.456.789-0	Av. Vitacura 2890, Vitacura, Santiago	+56 2 2456 7890	ventas@monturaspremium.cl	\N	Monturas de lujo, Marcas internacionales, Colecciones exclusivas	60 días	60	7.50	Ana María Rodríguez	+56 9 6543 2109	ana.rodriguez@monturaspremium.cl	Importador exclusivo de marcas europeas premium. Excelente servicio post-venta.	t	2025-10-05 03:50:43.879202	2025-10-05 03:50:43.879202
4	PROV000004	Lentes de Contacto Express S.A.	LentExpress	78.654.321-9	Av. Apoquindo 4500, Las Condes, Santiago	+56 2 2567 8901	pedidos@lentexpress.cl	\N	Lentes de contacto diarios, Lentes tóricas, Soluciones	Crédito	45	4.25	Carlos Alberto Silva	+56 9 5432 1098	carlos.silva@lentexpress.cl	Entrega rápida de lentes de contacto. Stock permanente de las principales marcas.	t	2025-10-05 03:50:43.879202	2025-10-05 03:50:43.879202
5	PROV000005	Accesorios Ópticos del Sur Ltda.	AccesoriosÓpticos	79.987.654-3	Av. Irarrázaval 1234, Ñuñoa, Santiago	+56 2 2678 9012	ventas@accesoriosopticos.cl	\N	Estuches, Paños de limpieza, Cordones, Accesorios	Contado	0	2.00	Patricia Morales López	+56 9 4321 0987	patricia.morales@accesoriosopticos.cl	Amplia variedad de accesorios para ópticas. Precios competitivos.	t	2025-10-05 03:50:43.879202	2025-10-05 03:50:43.879202
1	PROV000001	Óptica Distribuidora Ltda.	OptiDistrib	76.123.456-K	Av. Las Condes 1234, Las Condes, Santiago	+56 2 2234 5678	ventas@optidistrib.cl	\N	Lentes de contacto, Monturas, Cristales	Crédito	30	5.00	María González Pérez	+56 9 8765 4321	maria.gonzalez@optidistrib.cl	Proveedor principal de lentes de contacto. Descuentos especiales por volumen.	f	2025-10-05 03:50:43.879202	2025-10-09 02:42:00.726424
\.


--
-- TOC entry 5190 (class 0 OID 17308)
-- Dependencies: 241
-- Data for Name: reflejos_pupilares; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reflejos_pupilares (reflejo_id, ficha_id, acomodativo_uno, fotomotor_uno, consensual_uno, acomodativo_dos, fotomotor_dos, consensual_dos, observaciones, fecha_registro) FROM stdin;
\.


--
-- TOC entry 5192 (class 0 OID 17315)
-- Dependencies: 243
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (rol_id, nombre, descripcion, fecha_creacion, estado) FROM stdin;
1	Administrador	Acceso total al sistema	2025-10-03 04:06:14.890247	t
2	Médico Oftalmólogo	Acceso al módulo médico y consultas	2025-10-03 04:06:14.890247	t
3	Vendedor	Acceso al módulo comercial y ventas	2025-10-03 04:06:14.890247	t
4	Recepcionista	Registro de pacientes y citas	2025-10-03 04:06:14.890247	t
5	Supervisor	Acceso a reportes y supervisión	2025-10-03 04:06:14.890247	t
\.


--
-- TOC entry 5194 (class 0 OID 17323)
-- Dependencies: 245
-- Data for Name: tratamientos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tratamientos (tratamiento_id, ficha_id, medicamentos, tratamiento_no_farmacologico, recomendaciones, plan_seguimiento, proxima_cita, urgencia_seguimiento, fecha_tratamiento) FROM stdin;
\.


--
-- TOC entry 5196 (class 0 OID 17330)
-- Dependencies: 247
-- Data for Name: usuarios; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.usuarios (usuario_id, rol_id, username, password, nombre, ap_pat, ap_mat, email, fecha_creacion, estado) FROM stdin;
2	1	orl	scrypt:32768:8:1$uAoJh87hfSA4DxED$6d85763f76b547ac54d5449b8c407c83d5e7416c66dde352e66cea3d852a4f3bc731544a49a1ad1fb42186c95c40f65104ad85b42441bbde8bf91507dacb2b10	orl	orl	orl	orl@gmail.com	2025-10-05 00:27:56.31118	t
1	1	admin	scrypt:32768:8:1$KQH7MubpMbHgSXhm$3d1e428fba9992274eb71c4f916a235c182cbc3f1c82c8fb06f4c9c88c58d3bdfcaba29d143fd34ffaf1505cc941857e73717c1d94c504bb493d3280ee6aaa8f	Administrador	Sistema		admin@gmail.com	2025-10-03 04:06:14.890247	t
\.


--
-- TOC entry 5198 (class 0 OID 17338)
-- Dependencies: 249
-- Data for Name: ventas; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.ventas (venta_id, cliente_id, usuario_id, fecha_venta, total, descuento, metodo_pago, observaciones, estado) FROM stdin;
1	11	1	2025-10-14 05:11:37.097987	8500.00	0.00	efectivo	\N	completada
2	12	1	2025-10-14 05:21:55.301116	70.00	0.00	efectivo	\N	completada
3	13	1	2025-10-14 05:30:07.037132	3500.00	0.00	efectivo	\N	completada
4	14	1	2025-10-14 08:26:43.322262	25000.00	0.00	efectivo	\N	completada
5	\N	1	2025-11-20 06:23:32.460687	45000.00	0.00	efectivo	\N	completada
6	\N	1	2025-11-20 06:26:23.701269	45000.00	0.00	efectivo	\N	completada
7	\N	1	2025-11-29 22:57:47.556012	89.00	0.00	efectivo	\N	completada
10	\N	1	2026-01-09 00:45:11.161769	90.00	0.00	efectivo	\N	completada
\.


--
-- TOC entry 5248 (class 0 OID 0)
-- Dependencies: 257
-- Name: auth_group_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_group_id_seq', 1, false);


--
-- TOC entry 5249 (class 0 OID 0)
-- Dependencies: 259
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_group_permissions_id_seq', 1, false);


--
-- TOC entry 5250 (class 0 OID 0)
-- Dependencies: 255
-- Name: auth_permission_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_permission_id_seq', 92, true);


--
-- TOC entry 5251 (class 0 OID 0)
-- Dependencies: 263
-- Name: auth_user_groups_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_groups_id_seq', 1, false);


--
-- TOC entry 5252 (class 0 OID 0)
-- Dependencies: 261
-- Name: auth_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_id_seq', 1, true);


--
-- TOC entry 5253 (class 0 OID 0)
-- Dependencies: 265
-- Name: auth_user_user_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.auth_user_user_permissions_id_seq', 1, false);


--
-- TOC entry 5254 (class 0 OID 0)
-- Dependencies: 218
-- Name: biomicroscopia_biomicroscopia_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.biomicroscopia_biomicroscopia_id_seq', 1, false);


--
-- TOC entry 5255 (class 0 OID 0)
-- Dependencies: 220
-- Name: campos_visuales_campo_visual_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.campos_visuales_campo_visual_id_seq', 1, false);


--
-- TOC entry 5256 (class 0 OID 0)
-- Dependencies: 222
-- Name: clientes_cliente_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.clientes_cliente_id_seq', 15, true);


--
-- TOC entry 5257 (class 0 OID 0)
-- Dependencies: 271
-- Name: compras_compra_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.compras_compra_id_seq', 1, false);


--
-- TOC entry 5258 (class 0 OID 0)
-- Dependencies: 273
-- Name: compras_detalle_detalle_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.compras_detalle_detalle_id_seq', 1, false);


--
-- TOC entry 5259 (class 0 OID 0)
-- Dependencies: 224
-- Name: detalle_ventas_detalle_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.detalle_ventas_detalle_id_seq', 9, true);


--
-- TOC entry 5260 (class 0 OID 0)
-- Dependencies: 226
-- Name: diagnosticos_diagnostico_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.diagnosticos_diagnostico_id_seq', 1, false);


--
-- TOC entry 5261 (class 0 OID 0)
-- Dependencies: 267
-- Name: django_admin_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_admin_log_id_seq', 1, false);


--
-- TOC entry 5262 (class 0 OID 0)
-- Dependencies: 253
-- Name: django_content_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_content_type_id_seq', 23, true);


--
-- TOC entry 5263 (class 0 OID 0)
-- Dependencies: 251
-- Name: django_migrations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.django_migrations_id_seq', 22, true);


--
-- TOC entry 5264 (class 0 OID 0)
-- Dependencies: 228
-- Name: fichas_clinicas_ficha_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.fichas_clinicas_ficha_id_seq', 8, true);


--
-- TOC entry 5265 (class 0 OID 0)
-- Dependencies: 230
-- Name: fondo_ojo_fondo_ojo_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.fondo_ojo_fondo_ojo_id_seq', 1, false);


--
-- TOC entry 5266 (class 0 OID 0)
-- Dependencies: 232
-- Name: pacientes_medicos_paciente_medico_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.pacientes_medicos_paciente_medico_id_seq', 6, true);


--
-- TOC entry 5267 (class 0 OID 0)
-- Dependencies: 234
-- Name: parametros_clinicos_parametro_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.parametros_clinicos_parametro_id_seq', 1, false);


--
-- TOC entry 5268 (class 0 OID 0)
-- Dependencies: 236
-- Name: presion_intraocular_pio_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.presion_intraocular_pio_id_seq', 1, false);


--
-- TOC entry 5269 (class 0 OID 0)
-- Dependencies: 238
-- Name: productos_producto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.productos_producto_id_seq', 10, true);


--
-- TOC entry 5270 (class 0 OID 0)
-- Dependencies: 240
-- Name: proveedores_proveedor_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.proveedores_proveedor_id_seq', 5, true);


--
-- TOC entry 5271 (class 0 OID 0)
-- Dependencies: 242
-- Name: reflejos_pupilares_reflejo_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.reflejos_pupilares_reflejo_id_seq', 1, false);


--
-- TOC entry 5272 (class 0 OID 0)
-- Dependencies: 244
-- Name: roles_rol_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_rol_id_seq', 5, true);


--
-- TOC entry 5273 (class 0 OID 0)
-- Dependencies: 246
-- Name: tratamientos_tratamiento_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tratamientos_tratamiento_id_seq', 1, false);


--
-- TOC entry 5274 (class 0 OID 0)
-- Dependencies: 248
-- Name: usuarios_usuario_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.usuarios_usuario_id_seq', 2, true);


--
-- TOC entry 5275 (class 0 OID 0)
-- Dependencies: 250
-- Name: ventas_venta_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.ventas_venta_id_seq', 11, true);


--
-- TOC entry 4944 (class 2606 OID 17648)
-- Name: auth_group auth_group_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_name_key UNIQUE (name);


--
-- TOC entry 4949 (class 2606 OID 17579)
-- Name: auth_group_permissions auth_group_permissions_group_id_permission_id_0cd325b0_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_permission_id_0cd325b0_uniq UNIQUE (group_id, permission_id);


--
-- TOC entry 4952 (class 2606 OID 17548)
-- Name: auth_group_permissions auth_group_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id);


--
-- TOC entry 4946 (class 2606 OID 17540)
-- Name: auth_group auth_group_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_pkey PRIMARY KEY (id);


--
-- TOC entry 4939 (class 2606 OID 17570)
-- Name: auth_permission auth_permission_content_type_id_codename_01ab375a_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_codename_01ab375a_uniq UNIQUE (content_type_id, codename);


--
-- TOC entry 4941 (class 2606 OID 17534)
-- Name: auth_permission auth_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_pkey PRIMARY KEY (id);


--
-- TOC entry 4960 (class 2606 OID 17562)
-- Name: auth_user_groups auth_user_groups_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_pkey PRIMARY KEY (id);


--
-- TOC entry 4963 (class 2606 OID 17594)
-- Name: auth_user_groups auth_user_groups_user_id_group_id_94350c0c_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_group_id_94350c0c_uniq UNIQUE (user_id, group_id);


--
-- TOC entry 4954 (class 2606 OID 17554)
-- Name: auth_user auth_user_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_pkey PRIMARY KEY (id);


--
-- TOC entry 4966 (class 2606 OID 17568)
-- Name: auth_user_user_permissions auth_user_user_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_pkey PRIMARY KEY (id);


--
-- TOC entry 4969 (class 2606 OID 17608)
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_permission_id_14a6b632_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_permission_id_14a6b632_uniq UNIQUE (user_id, permission_id);


--
-- TOC entry 4957 (class 2606 OID 17643)
-- Name: auth_user auth_user_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user
    ADD CONSTRAINT auth_user_username_key UNIQUE (username);


--
-- TOC entry 4976 (class 2606 OID 17654)
-- Name: authtoken_token authtoken_token_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.authtoken_token
    ADD CONSTRAINT authtoken_token_pkey PRIMARY KEY (key);


--
-- TOC entry 4978 (class 2606 OID 17656)
-- Name: authtoken_token authtoken_token_user_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.authtoken_token
    ADD CONSTRAINT authtoken_token_user_id_key UNIQUE (user_id);


--
-- TOC entry 4868 (class 2606 OID 17365)
-- Name: biomicroscopia biomicroscopia_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biomicroscopia
    ADD CONSTRAINT biomicroscopia_pkey PRIMARY KEY (biomicroscopia_id);


--
-- TOC entry 4870 (class 2606 OID 17367)
-- Name: campos_visuales campos_visuales_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.campos_visuales
    ADD CONSTRAINT campos_visuales_pkey PRIMARY KEY (campo_visual_id);


--
-- TOC entry 4872 (class 2606 OID 17369)
-- Name: clientes clientes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.clientes
    ADD CONSTRAINT clientes_pkey PRIMARY KEY (cliente_id);


--
-- TOC entry 4874 (class 2606 OID 17371)
-- Name: clientes clientes_rut_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.clientes
    ADD CONSTRAINT clientes_rut_key UNIQUE (rut);


--
-- TOC entry 4987 (class 2606 OID 17725)
-- Name: compras_detalle compras_detalle_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras_detalle
    ADD CONSTRAINT compras_detalle_pkey PRIMARY KEY (detalle_id);


--
-- TOC entry 4984 (class 2606 OID 17701)
-- Name: compras compras_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras
    ADD CONSTRAINT compras_pkey PRIMARY KEY (compra_id);


--
-- TOC entry 4878 (class 2606 OID 17373)
-- Name: detalle_ventas detalle_ventas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.detalle_ventas
    ADD CONSTRAINT detalle_ventas_pkey PRIMARY KEY (detalle_id);


--
-- TOC entry 4880 (class 2606 OID 17375)
-- Name: diagnosticos diagnosticos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.diagnosticos
    ADD CONSTRAINT diagnosticos_pkey PRIMARY KEY (diagnostico_id);


--
-- TOC entry 4972 (class 2606 OID 17629)
-- Name: django_admin_log django_admin_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_pkey PRIMARY KEY (id);


--
-- TOC entry 4934 (class 2606 OID 17528)
-- Name: django_content_type django_content_type_app_label_model_76bd3d3b_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_app_label_model_76bd3d3b_uniq UNIQUE (app_label, model);


--
-- TOC entry 4936 (class 2606 OID 17526)
-- Name: django_content_type django_content_type_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_pkey PRIMARY KEY (id);


--
-- TOC entry 4932 (class 2606 OID 17520)
-- Name: django_migrations django_migrations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_migrations
    ADD CONSTRAINT django_migrations_pkey PRIMARY KEY (id);


--
-- TOC entry 4981 (class 2606 OID 17669)
-- Name: django_session django_session_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_session
    ADD CONSTRAINT django_session_pkey PRIMARY KEY (session_key);


--
-- TOC entry 4882 (class 2606 OID 17377)
-- Name: fichas_clinicas fichas_clinicas_numero_consulta_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fichas_clinicas
    ADD CONSTRAINT fichas_clinicas_numero_consulta_key UNIQUE (numero_consulta);


--
-- TOC entry 4884 (class 2606 OID 17379)
-- Name: fichas_clinicas fichas_clinicas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fichas_clinicas
    ADD CONSTRAINT fichas_clinicas_pkey PRIMARY KEY (ficha_id);


--
-- TOC entry 4888 (class 2606 OID 17381)
-- Name: fondo_ojo fondo_ojo_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fondo_ojo
    ADD CONSTRAINT fondo_ojo_pkey PRIMARY KEY (fondo_ojo_id);


--
-- TOC entry 4891 (class 2606 OID 17383)
-- Name: pacientes_medicos pacientes_medicos_numero_ficha_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes_medicos
    ADD CONSTRAINT pacientes_medicos_numero_ficha_key UNIQUE (numero_ficha);


--
-- TOC entry 4893 (class 2606 OID 17385)
-- Name: pacientes_medicos pacientes_medicos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes_medicos
    ADD CONSTRAINT pacientes_medicos_pkey PRIMARY KEY (paciente_medico_id);


--
-- TOC entry 4896 (class 2606 OID 17387)
-- Name: parametros_clinicos parametros_clinicos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametros_clinicos
    ADD CONSTRAINT parametros_clinicos_pkey PRIMARY KEY (parametro_id);


--
-- TOC entry 4898 (class 2606 OID 17389)
-- Name: presion_intraocular presion_intraocular_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.presion_intraocular
    ADD CONSTRAINT presion_intraocular_pkey PRIMARY KEY (pio_id);


--
-- TOC entry 4900 (class 2606 OID 17391)
-- Name: productos productos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.productos
    ADD CONSTRAINT productos_pkey PRIMARY KEY (producto_id);


--
-- TOC entry 4907 (class 2606 OID 17395)
-- Name: proveedores proveedores_codigo_proveedor_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.proveedores
    ADD CONSTRAINT proveedores_codigo_proveedor_key UNIQUE (codigo_proveedor);


--
-- TOC entry 4909 (class 2606 OID 17397)
-- Name: proveedores proveedores_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.proveedores
    ADD CONSTRAINT proveedores_pkey PRIMARY KEY (proveedor_id);


--
-- TOC entry 4911 (class 2606 OID 17399)
-- Name: proveedores proveedores_rut_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.proveedores
    ADD CONSTRAINT proveedores_rut_key UNIQUE (rut);


--
-- TOC entry 4914 (class 2606 OID 17401)
-- Name: reflejos_pupilares reflejos_pupilares_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reflejos_pupilares
    ADD CONSTRAINT reflejos_pupilares_pkey PRIMARY KEY (reflejo_id);


--
-- TOC entry 4916 (class 2606 OID 17403)
-- Name: roles roles_nombre_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_nombre_key UNIQUE (nombre);


--
-- TOC entry 4918 (class 2606 OID 17405)
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (rol_id);


--
-- TOC entry 4920 (class 2606 OID 17407)
-- Name: tratamientos tratamientos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tratamientos
    ADD CONSTRAINT tratamientos_pkey PRIMARY KEY (tratamiento_id);


--
-- TOC entry 4923 (class 2606 OID 17409)
-- Name: usuarios usuarios_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_email_key UNIQUE (email);


--
-- TOC entry 4925 (class 2606 OID 17411)
-- Name: usuarios usuarios_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_pkey PRIMARY KEY (usuario_id);


--
-- TOC entry 4927 (class 2606 OID 17413)
-- Name: usuarios usuarios_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_username_key UNIQUE (username);


--
-- TOC entry 4930 (class 2606 OID 17415)
-- Name: ventas ventas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ventas
    ADD CONSTRAINT ventas_pkey PRIMARY KEY (venta_id);


--
-- TOC entry 4942 (class 1259 OID 17649)
-- Name: auth_group_name_a6ea08ec_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_name_a6ea08ec_like ON public.auth_group USING btree (name varchar_pattern_ops);


--
-- TOC entry 4947 (class 1259 OID 17590)
-- Name: auth_group_permissions_group_id_b120cbf9; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON public.auth_group_permissions USING btree (group_id);


--
-- TOC entry 4950 (class 1259 OID 17591)
-- Name: auth_group_permissions_permission_id_84c5c92e; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON public.auth_group_permissions USING btree (permission_id);


--
-- TOC entry 4937 (class 1259 OID 17576)
-- Name: auth_permission_content_type_id_2f476e4b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_permission_content_type_id_2f476e4b ON public.auth_permission USING btree (content_type_id);


--
-- TOC entry 4958 (class 1259 OID 17606)
-- Name: auth_user_groups_group_id_97559544; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_groups_group_id_97559544 ON public.auth_user_groups USING btree (group_id);


--
-- TOC entry 4961 (class 1259 OID 17605)
-- Name: auth_user_groups_user_id_6a12ed8b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_groups_user_id_6a12ed8b ON public.auth_user_groups USING btree (user_id);


--
-- TOC entry 4964 (class 1259 OID 17620)
-- Name: auth_user_user_permissions_permission_id_1fbb5f2c; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_user_permissions_permission_id_1fbb5f2c ON public.auth_user_user_permissions USING btree (permission_id);


--
-- TOC entry 4967 (class 1259 OID 17619)
-- Name: auth_user_user_permissions_user_id_a95ead1b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_user_permissions_user_id_a95ead1b ON public.auth_user_user_permissions USING btree (user_id);


--
-- TOC entry 4955 (class 1259 OID 17644)
-- Name: auth_user_username_6821ab7c_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_user_username_6821ab7c_like ON public.auth_user USING btree (username varchar_pattern_ops);


--
-- TOC entry 4974 (class 1259 OID 17662)
-- Name: authtoken_token_key_10f0b77e_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX authtoken_token_key_10f0b77e_like ON public.authtoken_token USING btree (key varchar_pattern_ops);


--
-- TOC entry 4970 (class 1259 OID 17640)
-- Name: django_admin_log_content_type_id_c4bce8eb; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON public.django_admin_log USING btree (content_type_id);


--
-- TOC entry 4973 (class 1259 OID 17641)
-- Name: django_admin_log_user_id_c564eba6; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_user_id_c564eba6 ON public.django_admin_log USING btree (user_id);


--
-- TOC entry 4979 (class 1259 OID 17671)
-- Name: django_session_expire_date_a5c62663; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_expire_date_a5c62663 ON public.django_session USING btree (expire_date);


--
-- TOC entry 4982 (class 1259 OID 17670)
-- Name: django_session_session_key_c0390e0f_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_session_key_c0390e0f_like ON public.django_session USING btree (session_key varchar_pattern_ops);


--
-- TOC entry 4875 (class 1259 OID 17416)
-- Name: idx_clientes_nombres; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_clientes_nombres ON public.clientes USING btree (nombres, ap_pat);


--
-- TOC entry 4876 (class 1259 OID 17417)
-- Name: idx_clientes_rut; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_clientes_rut ON public.clientes USING btree (rut);


--
-- TOC entry 4988 (class 1259 OID 17737)
-- Name: idx_compras_detalle_compra; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_compras_detalle_compra ON public.compras_detalle USING btree (compra_id);


--
-- TOC entry 4989 (class 1259 OID 17738)
-- Name: idx_compras_detalle_producto; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_compras_detalle_producto ON public.compras_detalle USING btree (producto_id);


--
-- TOC entry 4985 (class 1259 OID 17736)
-- Name: idx_compras_proveedor; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_compras_proveedor ON public.compras USING btree (proveedor_id);


--
-- TOC entry 4885 (class 1259 OID 17418)
-- Name: idx_fichas_fecha; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_fichas_fecha ON public.fichas_clinicas USING btree (fecha_consulta);


--
-- TOC entry 4886 (class 1259 OID 17419)
-- Name: idx_fichas_numero; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_fichas_numero ON public.fichas_clinicas USING btree (numero_consulta);


--
-- TOC entry 4889 (class 1259 OID 17420)
-- Name: idx_pacientes_numero_ficha; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pacientes_numero_ficha ON public.pacientes_medicos USING btree (numero_ficha);


--
-- TOC entry 4894 (class 1259 OID 17421)
-- Name: idx_parametros_clinicos_ficha; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_parametros_clinicos_ficha ON public.parametros_clinicos USING btree (ficha_id);


--
-- TOC entry 4901 (class 1259 OID 17422)
-- Name: idx_proveedores_codigo; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_proveedores_codigo ON public.proveedores USING btree (codigo_proveedor);


--
-- TOC entry 4902 (class 1259 OID 17423)
-- Name: idx_proveedores_estado; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_proveedores_estado ON public.proveedores USING btree (estado);


--
-- TOC entry 4903 (class 1259 OID 17424)
-- Name: idx_proveedores_fecha_registro; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_proveedores_fecha_registro ON public.proveedores USING btree (fecha_registro);


--
-- TOC entry 4904 (class 1259 OID 17425)
-- Name: idx_proveedores_razon_social; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_proveedores_razon_social ON public.proveedores USING btree (razon_social);


--
-- TOC entry 4905 (class 1259 OID 17426)
-- Name: idx_proveedores_rut; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_proveedores_rut ON public.proveedores USING btree (rut);


--
-- TOC entry 4912 (class 1259 OID 17427)
-- Name: idx_reflejos_pupilares_ficha; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_reflejos_pupilares_ficha ON public.reflejos_pupilares USING btree (ficha_id);


--
-- TOC entry 4921 (class 1259 OID 17428)
-- Name: idx_usuarios_username; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_usuarios_username ON public.usuarios USING btree (username);


--
-- TOC entry 4928 (class 1259 OID 17429)
-- Name: idx_ventas_fecha; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ventas_fecha ON public.ventas USING btree (fecha_venta);


--
-- TOC entry 5019 (class 2620 OID 17430)
-- Name: proveedores trigger_actualizar_fecha_proveedor; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_actualizar_fecha_proveedor BEFORE UPDATE ON public.proveedores FOR EACH ROW EXECUTE FUNCTION public.actualizar_fecha_modificacion_proveedor();


--
-- TOC entry 5020 (class 2620 OID 17431)
-- Name: proveedores trigger_generar_codigo_proveedor; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_generar_codigo_proveedor BEFORE INSERT ON public.proveedores FOR EACH ROW EXECUTE FUNCTION public.generar_codigo_proveedor();


--
-- TOC entry 5007 (class 2606 OID 17585)
-- Name: auth_group_permissions auth_group_permissio_permission_id_84c5c92e_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5008 (class 2606 OID 17580)
-- Name: auth_group_permissions auth_group_permissions_group_id_b120cbf9_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5006 (class 2606 OID 17571)
-- Name: auth_permission auth_permission_content_type_id_2f476e4b_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_2f476e4b_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5009 (class 2606 OID 17600)
-- Name: auth_user_groups auth_user_groups_group_id_97559544_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_group_id_97559544_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5010 (class 2606 OID 17595)
-- Name: auth_user_groups auth_user_groups_user_id_6a12ed8b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_groups
    ADD CONSTRAINT auth_user_groups_user_id_6a12ed8b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5011 (class 2606 OID 17614)
-- Name: auth_user_user_permissions auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permi_permission_id_1fbb5f2c_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5012 (class 2606 OID 17609)
-- Name: auth_user_user_permissions auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_user_user_permissions
    ADD CONSTRAINT auth_user_user_permissions_user_id_a95ead1b_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5015 (class 2606 OID 17657)
-- Name: authtoken_token authtoken_token_user_id_35299eff_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.authtoken_token
    ADD CONSTRAINT authtoken_token_user_id_35299eff_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 4990 (class 2606 OID 17432)
-- Name: biomicroscopia biomicroscopia_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.biomicroscopia
    ADD CONSTRAINT biomicroscopia_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 4991 (class 2606 OID 17437)
-- Name: campos_visuales campos_visuales_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.campos_visuales
    ADD CONSTRAINT campos_visuales_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 5017 (class 2606 OID 17726)
-- Name: compras_detalle compras_detalle_compra_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras_detalle
    ADD CONSTRAINT compras_detalle_compra_id_fkey FOREIGN KEY (compra_id) REFERENCES public.compras(compra_id) ON DELETE CASCADE;


--
-- TOC entry 5018 (class 2606 OID 17731)
-- Name: compras_detalle compras_detalle_producto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras_detalle
    ADD CONSTRAINT compras_detalle_producto_id_fkey FOREIGN KEY (producto_id) REFERENCES public.productos(producto_id);


--
-- TOC entry 5016 (class 2606 OID 17702)
-- Name: compras compras_proveedor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.compras
    ADD CONSTRAINT compras_proveedor_id_fkey FOREIGN KEY (proveedor_id) REFERENCES public.proveedores(proveedor_id);


--
-- TOC entry 4992 (class 2606 OID 17442)
-- Name: detalle_ventas detalle_ventas_producto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.detalle_ventas
    ADD CONSTRAINT detalle_ventas_producto_id_fkey FOREIGN KEY (producto_id) REFERENCES public.productos(producto_id);


--
-- TOC entry 4993 (class 2606 OID 17447)
-- Name: detalle_ventas detalle_ventas_venta_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.detalle_ventas
    ADD CONSTRAINT detalle_ventas_venta_id_fkey FOREIGN KEY (venta_id) REFERENCES public.ventas(venta_id);


--
-- TOC entry 4994 (class 2606 OID 17452)
-- Name: diagnosticos diagnosticos_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.diagnosticos
    ADD CONSTRAINT diagnosticos_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 5013 (class 2606 OID 17630)
-- Name: django_admin_log django_admin_log_content_type_id_c4bce8eb_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_content_type_id_c4bce8eb_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 5014 (class 2606 OID 17635)
-- Name: django_admin_log django_admin_log_user_id_c564eba6_fk_auth_user_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_user_id_c564eba6_fk_auth_user_id FOREIGN KEY (user_id) REFERENCES public.auth_user(id) DEFERRABLE INITIALLY DEFERRED;


--
-- TOC entry 4995 (class 2606 OID 17457)
-- Name: fichas_clinicas fichas_clinicas_paciente_medico_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fichas_clinicas
    ADD CONSTRAINT fichas_clinicas_paciente_medico_id_fkey FOREIGN KEY (paciente_medico_id) REFERENCES public.pacientes_medicos(paciente_medico_id);


--
-- TOC entry 4996 (class 2606 OID 17462)
-- Name: fichas_clinicas fichas_clinicas_usuario_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fichas_clinicas
    ADD CONSTRAINT fichas_clinicas_usuario_id_fkey FOREIGN KEY (usuario_id) REFERENCES public.usuarios(usuario_id);


--
-- TOC entry 4997 (class 2606 OID 17467)
-- Name: fondo_ojo fondo_ojo_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.fondo_ojo
    ADD CONSTRAINT fondo_ojo_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 4998 (class 2606 OID 17472)
-- Name: pacientes_medicos pacientes_medicos_cliente_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pacientes_medicos
    ADD CONSTRAINT pacientes_medicos_cliente_id_fkey FOREIGN KEY (cliente_id) REFERENCES public.clientes(cliente_id);


--
-- TOC entry 4999 (class 2606 OID 17477)
-- Name: parametros_clinicos parametros_clinicos_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.parametros_clinicos
    ADD CONSTRAINT parametros_clinicos_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id) ON DELETE CASCADE;


--
-- TOC entry 5000 (class 2606 OID 17482)
-- Name: presion_intraocular presion_intraocular_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.presion_intraocular
    ADD CONSTRAINT presion_intraocular_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 5001 (class 2606 OID 17487)
-- Name: reflejos_pupilares reflejos_pupilares_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reflejos_pupilares
    ADD CONSTRAINT reflejos_pupilares_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id) ON DELETE CASCADE;


--
-- TOC entry 5002 (class 2606 OID 17492)
-- Name: tratamientos tratamientos_ficha_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tratamientos
    ADD CONSTRAINT tratamientos_ficha_id_fkey FOREIGN KEY (ficha_id) REFERENCES public.fichas_clinicas(ficha_id);


--
-- TOC entry 5003 (class 2606 OID 17497)
-- Name: usuarios usuarios_rol_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuarios
    ADD CONSTRAINT usuarios_rol_id_fkey FOREIGN KEY (rol_id) REFERENCES public.roles(rol_id);


--
-- TOC entry 5004 (class 2606 OID 17502)
-- Name: ventas ventas_cliente_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ventas
    ADD CONSTRAINT ventas_cliente_id_fkey FOREIGN KEY (cliente_id) REFERENCES public.clientes(cliente_id);


--
-- TOC entry 5005 (class 2606 OID 17507)
-- Name: ventas ventas_usuario_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ventas
    ADD CONSTRAINT ventas_usuario_id_fkey FOREIGN KEY (usuario_id) REFERENCES public.usuarios(usuario_id);


-- Completed on 2026-01-17 22:30:05

--
-- PostgreSQL database dump complete
--

